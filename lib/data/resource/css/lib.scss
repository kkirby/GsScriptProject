@function power($x,$n){
    $ret: 1;
    @if $n >= 0 {
        @for $i from 1 through $n {
            $ret: $ret * $x;
        } 
    }
	@else {
        @for $i from $n to 0 {
            $ret: $ret / $x;
        }
    }
    @return $ret;
}

@function factorial($x){
	$ret: 1;
	@if $x > 0 {
		@while $x > 0 {
			$ret: $ret * $x;
			$x: $x - 1;
		}
	}
	@return $ret;
}

@function sin($x){
	$ret: 0;
	@for $n from 0 to 25 {
		$ret: $ret + power(-1, $n) * power($x, 2 * $n + 1) / factorial(2 * $n + 1);
	}
	@return $ret;
}

@function cos($x){
	$ret: 0;
	@for $n from 0 to 25 {
		$ret: $ret + power(-1, $n) * power($x, 2 * $n) / factorial(2 * $n);
	}
	@return $ret;
}

@function exp($x){
	$ret: 0;
	@for $n from 0 to 25 {
		$ret: $ret + power($x, $n) / factorial($n);
	}	
	@return $ret;
}

@function ln($x){
	$ret: 0;
	$n: 1;
	$dx: .001;	
	@while $n <= $x {
		$ret: $ret + $dx / $n;		
		$n: $n + $dx;
	}	
	@return $ret;
}

@function sqrt($x){
	@return exp(0.5 * ln($x));
}

@function convert-angle($value, $unit){
	$convertable-units: deg grad turn rad;
	$conversion-factors: 1 10grad/9deg 1turn/360deg 3.1415926rad/180deg;
	@if index($convertable-units, unit($value)) and index($convertable-units, $unit) {
		@return $value / nth($conversion-factors, index($convertable-units, unit($value))) * nth($conversion-factors, index($convertable-units, $unit));
  	}
	@else {
		@warn "Cannot convert #{unit($value)} to #{$unit}";
	}
}

@function getPointInCircle($cX,$cY,$radius,$angle){
	@if unit($angle) == deg {
		$angle: ($angle * 3.14159 / 180) / 1deg;
	}
	@return ($cX + $radius * cos($angle),$cY - $radius * sin($angle));
}

@function getPointInEllipse($cX,$cY,$xRadius,$yRadius,$angle){
	@if unit($angle) == deg {
		$angle: ($angle * 3.14159 / 180) / 1deg;
	}
	@return ($cX + $xRadius * cos($angle),$cY - $yRadius * sin($angle));
}


@function rounded($num,$placeholder: 0){
	$multipler: power(10,$placeholder);
	@return round($num * $multipler) / $multipler;
}

@mixin backgroundGradient($colors...){
	$formatA: null;
	$formatB: null;
	$formatC: null;
	
	$direction: nth($colors,1);
	@if $direction == 'top' {
		$formatA: top;
		$formatB: linear, left top, left bottom;
		$formatC: to bottom;
	}
	@elseif $direction == 'bottom' {
		$formatA: bottom;
		$formatB: linear, left bottom, left top;
		$formatC: to top;
	}
	@elseif $direction == 'left' {
		$formatA: left;
		$formatB: linear, left top, right top;
		$formatC: to right;
	}
	@elseif $direction == 'right' {
		$formatA: right;
		$formatB: linear, right top, left top;
		$formatC: to left;
	}
	@elseif type-of($direction) == 'number' {
		$formatA: $direction;
		$formatC: ($direction + (360deg / 2)) % 360;
		$deg: ($direction + 360deg) % 360;
		@if $deg == 45deg {
			$formatB: linear, right top, left bottom;
		}
		@elseif $deg == 135deg {
			$formatB: linear, right bottom, left top;
		}
		@elseif $deg == 225deg {
			$formatB: linear, left bottom, right top;
		}
		@elseif $deg == 315deg {
			$formatB: linear, left top, right bottom;
		}
	}
	$prepend: null;
	$append: null;
	$hasColor: false;
	@for $i from 2 through length($colors) {
		$colorGroup: nth($colors,$i);
		@if type-of($colorGroup) == 'string' {
			@if $hasColor {
				@if $append == null {
					$append: $colorGroup;
				}
				@else {
					$append: append($append,$colorGroup,'comma');
				}
			}
			@else {
				@if $prepend == null {
					$prepend: $colorGroup;
				}
				@else {
					$prepend: append($prepend,$colorGroup,'comma');
				}
			}
		}
		@else {
			$hasColor: true;
			$color: nth($colorGroup,1);
			$offset: nth($colorGroup,2);
			$formatA: append($formatA,$color $offset,'comma');
			$formatB: append($formatB,color-stop($offset,$color),'comma');
			$formatC: append($formatC,$color $offset,'comma');
		}
	}
	
	background-image: join($prepend,join(-moz-linear-gradient($formatA),$append),'comma');
	background-image: join($prepend,join(-webkit-gradient($formatB),$append),'comma');
	background-image: join($prepend,join(-webkit-linear-gradient($formatA),$append),'comma');
	background-image: join($prepend,join(-o-linear-gradient($formatA),$append),'comma');
	background-image: join($prepend,join(-ms-linear-gradient($formatA),$append),'comma');
	background-image: join($prepend,join(linear-gradient($formatC),$append),'comma');
}

@mixin position($x,$y,$width: auto,$height: auto){
	position: absolute;
	$top: $y;
	$left: $x;
	$right: auto;
	$bottom: auto;
	@if(type-of($top) == 'number' and $top < 0){
		$bottom: abs($top+1);
		$top: auto;
	}
	@if(type-of($left) == 'number' and $left < 0){
		$right: abs($left+1);
		$left: auto;
	}
	@if(type-of($width) == 'number' and $width < 0){
		@if($right == auto){
			$right: abs($width+1);
		}
		@else {
			$left: abs($width+1);
		}
		$width: auto;
	}
	@if(type-of($height) == 'number' and $height < 0){
		@if($bottom == auto){
			$bottom: abs($height+1);
		}
		@else {
			$top: abs($height+1);
		}
		$height: auto;
	}
	$transform: ();
	@if(type-of($top) == 'string' and $top == center){
		@if($height != auto){
			$top: 50%;
			margin-top: -1*round($height/2);
		}
		@else {
			$top: 50%;
			$transform: append($transform,translateY(-50%),space);
		}
	}
	@if(type-of($left) == 'string' and $left == center){
		@if($width != auto){
			$left: 50%;
			margin-left: -1*round($width/2);
		}
		@else {
			$left: 50%;
			$transform: append($transform,translateX(-50%),space);
		}
	}
	@if($top != auto){
		top: $top;
	}
	@if($right != auto){
		right: $right;
	}
	@if($bottom != auto){
		bottom: $bottom;
	}
	@if($left != auto){
		left: $left;
	}
	@if($width != auto){
		width: $width;
	}
	@if($height != auto){
		height: $height;
	}
	@if(length($transform) > 0){
		-webkit-transform: translateZ(0) scale(1.0, 1.0) $transform;
	}
}

@function neg($value){
	@return (-1 * $value) - 1;
}

@mixin keyframes($name) {
	@-webkit-keyframes #{$name} {
		@content; 
	}
	@-moz-keyframes #{$name} {
		@content;
	}
	@-ms-keyframes #{$name} {
		@content;
	}
	@keyframes #{$name} {
		@content;
	}
}

@mixin disableSelection(){
	-webkit-touch-callout: none;
	-webkit-user-select: none;
	-khtml-user-select: none;
	-moz-user-select: none;
	-ms-user-select: none;
	user-select: none;
}

@mixin animation($props...){
	-webkit-animation: $props;
	-moz-animation: $props;
	-o-animation: $props;
	animation: $props;
}

@mixin forAttrs($attrName,$attrValues...){
	$selectors: ();
	@each $attrValue in $attrValues {
		$selectors: append($selectors,unquote('&[#{$attrName}="#{$attrValue}"]'),comma);
	}
	#{$selectors} {
		@content;
	}
}

@mixin states($states,$append: ''){
	$selectorsA: ();
	$selectorsB: ();
	@each $state in $states {
		$selectorsA: append($selectorsA,unquote('.#{$append}#{$state}'),comma);
		$selectorsB: append($selectorsB,unquote('&.#{$append}#{$state} .#{$append}#{$state}'),comma);
	}
	#{$selectorsA} {
		display: none;
	}
	#{$selectorsB} {
		display: block;
	}
}

@mixin clearfix(){
	&:after {
		display: inline-block;
		content: ' ';
		clear: both;
		width: 0;
		height: 0;
		visibility: hidden;
	}
}
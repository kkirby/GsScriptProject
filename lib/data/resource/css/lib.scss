$__contentVars: ();

@function StartContent($args...){
	$__contentVars: append($__contentVars,$args);
	@return 0;
}

@function GetContentVar($key){
	$contentVars: nth($__contentVars,length($__contentVars));
	@for $i from 1 through length($contentVars) {
		$contentVar: nth($contentVars,$i);
		@if nth($contentVar,1) == $key {
			@return nth($contentVar,2);
		}
	}
	@warn "Key \"#{$key}\" does not exist!";
	@return;
}

@function EndContent(){
	$result: ();
	@for $i from 1 through length($__contentVars) - 1 {
		$result: append($result,nth($__contentVars,$i));
	}
	$__contentVars: $result;
	@return 0;
}

@function pi(){
	@return 3.1415926;
}


@function power($x,$n){
    $ret: 1;
    @if $n >= 0 {
        @for $i from 1 through $n {
            $ret: $ret * $x;
        } 
    }
	@else {
        @for $i from $n to 0 {
            $ret: $ret / $x;
        }
    }
    @return $ret;
}

@function pow($x,$n){
	@return power($x,$n);
}

@function factorial($x){
	$ret: 1;
	@if $x > 0 {
		@while $x > 0 {
			$ret: $ret * $x;
			$x: $x - 1;
		}
	}
	@return $ret;
}

@function sin($x){
	$ret: 0;
	@for $n from 0 to 25 {
		$ret: $ret + power(-1, $n) * power($x, 2 * $n + 1) / factorial(2 * $n + 1);
	}
	@return $ret;
}

@function cos($x){
	$ret: 0;
	@for $n from 0 to 25 {
		$ret: $ret + power(-1, $n) * power($x, 2 * $n) / factorial(2 * $n);
	}
	@return $ret;
}

@function tan($angle){
	@return sin($angle) / cos($angle);
}

@function exp($x){
	$ret: 0;
	@for $n from 0 to 25 {
		$ret: $ret + power($x, $n) / factorial($n);
	}	
	@return $ret;
}

@function ln($x){
	$ret: 0;
	$n: 1;
	$dx: .001;	
	@while $n <= $x {
		$ret: $ret + $dx / $n;
		$n: $n + $dx;
	}	
	@return $ret;
}

@function sqrt($x){
	@return exp(0.5 * ln($x));
}

$default-threshold: pi()/180/20;

@function convert-angle($value, $unit-name) {
	@if $unit-name == rad {
		@return $value * 1rad;
	}
	@else if $unit-name == deg {
		@return $value * 180deg / pi();
	}
	@else if $unit-name == grad {
		@return $value * 200grad/pi();
	}
	@else if $unit-name == turn {
		@return $value * .5turn / pi();
	}
	@else {
		@warn 'unit `#{$unit-name}` is not a valid unit - please make sure it is either `deg`, `rad`, `grad` or `turn`';
	}
}

@function asin($z, $unit-name: deg, $threshold: $default-threshold) {
  $sum: 0;
  $complement: false;
  $sign: if($z != 0, $z/abs($z), 1);
  $z: abs($z);
  
  @if $z > 1 {
    @warn 'illegal `#{$z}` value for function';
    @return false;
  }

  @if $z > sin(pi()/4) {
    $complement: true;
    $z: sqrt(1 - pow($z, 2));
  }

  $term: $z;
  $i: 0;
  $k: 1;

  @while $term > $threshold {
    $sum: $sum + $term;

    $i: $i + 1;
    $k: $k*(2*$i - 1)/(2*$i);
    $j: 2*$i + 1;

    $term: $k*pow($z, $j)/$j;
  }

  @return convert-angle($sign*(if($complement, pi()/2 - $sum, $sum)), $unit-name);
}

@function acos($z, $unit-name: deg, $threshold: $default-threshold) {
  @return convert-angle(pi()/2, $unit-name) - asin($z, $unit-name, $threshold);
}

@function atan($z, $unit-name: deg, $threshold: $default-threshold) {
  @return asin($z/sqrt(1 + pow($z, 2)), $unit-name, $threshold);
}

@function getPointInCircle($cX,$cY,$radius,$angle){
	@if unit($angle) == deg {
		$angle: ($angle * 3.14159 / 180) / 1deg;
	}
	@return ($cX + $radius * cos($angle),$cY - $radius * sin($angle));
}

@function getPointInEllipse($cX,$cY,$xRadius,$yRadius,$angle){
	@if unit($angle) == deg {
		$angle: ($angle * 3.14159 / 180) / 1deg;
	}
	@return ($cX + $xRadius * cos($angle),$cY - $yRadius * sin($angle));
}


@function rounded($num,$placeholder: 0){
	$multipler: power(10,$placeholder);
	@return round($num * $multipler) / $multipler;
}

@mixin backgroundGradient($colors...){
	$formatA: null;
	$formatB: null;
	$formatC: null;
	
	$direction: nth($colors,1);
	@if $direction == 'top' {
		$formatA: top;
		$formatB: linear, left top, left bottom;
		$formatC: to bottom;
	}
	@elseif $direction == 'bottom' {
		$formatA: bottom;
		$formatB: linear, left bottom, left top;
		$formatC: to top;
	}
	@elseif $direction == 'left' {
		$formatA: left;
		$formatB: linear, left top, right top;
		$formatC: to right;
	}
	@elseif $direction == 'right' {
		$formatA: right;
		$formatB: linear, right top, left top;
		$formatC: to left;
	}
	@elseif type-of($direction) == 'number' {
		$formatA: $direction;
		$formatC: ($direction + (360deg / 2)) % 360;
		$deg: ($direction + 360deg) % 360;
		@if $deg == 45deg {
			$formatB: linear, right top, left bottom;
		}
		@elseif $deg == 135deg {
			$formatB: linear, right bottom, left top;
		}
		@elseif $deg == 225deg {
			$formatB: linear, left bottom, right top;
		}
		@elseif $deg == 315deg {
			$formatB: linear, left top, right bottom;
		}
	}
	$prepend: null;
	$append: null;
	$hasColor: false;
	@for $i from 2 through length($colors) {
		$colorGroup: nth($colors,$i);
		@if type-of($colorGroup) == 'string' {
			@if $hasColor {
				@if $append == null {
					$append: $colorGroup;
				}
				@else {
					$append: append($append,$colorGroup,'comma');
				}
			}
			@else {
				@if $prepend == null {
					$prepend: $colorGroup;
				}
				@else {
					$prepend: append($prepend,$colorGroup,'comma');
				}
			}
		}
		@else {
			$hasColor: true;
			$color: nth($colorGroup,1);
			$offset: nth($colorGroup,2);
			$formatA: append($formatA,$color $offset,'comma');
			$formatB: append($formatB,color-stop($offset,$color),'comma');
			$formatC: append($formatC,$color $offset,'comma');
		}
	}
	
	background-image: join($prepend,join(-moz-linear-gradient($formatA),$append),'comma');
	background-image: join($prepend,join(-webkit-gradient($formatB),$append),'comma');
	background-image: join($prepend,join(-webkit-linear-gradient($formatA),$append),'comma');
	background-image: join($prepend,join(-o-linear-gradient($formatA),$append),'comma');
	background-image: join($prepend,join(-ms-linear-gradient($formatA),$append),'comma');
	background-image: join($prepend,join(linear-gradient($formatC),$append),'comma');
}

@mixin position($x,$y,$width: auto,$height: auto){
	position: absolute;
	$top: $y;
	$left: $x;
	$right: auto;
	$bottom: auto;
	@if(type-of($top) == 'number' and $top < 0){
		$bottom: abs($top+1);
		$top: auto;
	}
	@if(type-of($left) == 'number' and $left < 0){
		$right: abs($left+1);
		$left: auto;
	}
	@if(type-of($width) == 'number' and $width < 0){
		@if($right == auto){
			$right: abs($width+1);
		}
		@else {
			$left: abs($width+1);
		}
		$width: auto;
	}
	@if(type-of($height) == 'number' and $height < 0){
		@if($bottom == auto){
			$bottom: abs($height+1);
		}
		@else {
			$top: abs($height+1);
		}
		$height: auto;
	}
	$transform: ();
	@if(type-of($top) == 'string' and $top == center){
		@if($height != auto){
			$top: 50%;
			margin-top: -1*round($height/2);
		}
		@else {
			$top: 50%;
			$transform: append($transform,translateY(-50%),space);
		}
	}
	@if(type-of($left) == 'string' and $left == center){
		@if($width != auto){
			$left: 50%;
			margin-left: -1*round($width/2);
		}
		@else {
			$left: 50%;
			$transform: append($transform,translateX(-50%),space);
		}
	}
	@if($top != auto){
		top: $top;
	}
	@if($right != auto){
		right: $right;
	}
	@if($bottom != auto){
		bottom: $bottom;
	}
	@if($left != auto){
		left: $left;
	}
	@if($width != auto){
		width: $width;
	}
	@if($height != auto){
		height: $height;
	}
	@if(length($transform) > 0){
		-webkit-transform: translateZ(0) scale(1.0, 1.0) $transform;
	}
}

@function neg($value){
	@return (-1 * $value) - 1;
}

@mixin keyframes($name) {
	@-webkit-keyframes #{$name} {
		@content; 
	}
	@-moz-keyframes #{$name} {
		@content;
	}
	@-ms-keyframes #{$name} {
		@content;
	}
	@keyframes #{$name} {
		@content;
	}
}

@mixin disableSelection(){
	-webkit-touch-callout: none;
	-webkit-user-select: none;
	-khtml-user-select: none;
	-moz-user-select: none;
	-ms-user-select: none;
	user-select: none;
}

@mixin animation($props...){
	-webkit-animation: $props;
	-moz-animation: $props;
	-o-animation: $props;
	animation: $props;
}

@mixin forAttrs($attrName,$attrValues...){
	$selectors: ();
	@each $attrValue in $attrValues {
		$selectors: append($selectors,unquote('&[#{$attrName}="#{$attrValue}"]'),comma);
	}
	#{$selectors} {
		@content;
	}
}

@mixin states($states,$append: ''){
	$selectorsA: ();
	$selectorsB: ();
	$selectorsC: ();
	@each $state in $states {
		$selectorsA: append($selectorsA,unquote('.#{$append}#{$state}'),comma);
		$selectorsB: append($selectorsB,unquote('&.#{$append}#{$state} .#{$append}#{$state}'),comma);
		$selectorsC: append($selectorsC,unquote('&.#{$append}#{$state} span.#{$append}#{$state}'),comma);
	}
	#{$selectorsA} {
		display: none;
	}
	#{$selectorsB} {
		display: block;
	}
	
	#{$selectorsC} {
		display: inline;
	}
}

@mixin clearfix(){
	&:after {
		display: inline-block;
		content: ' ';
		clear: both;
		width: 0;
		height: 0;
		visibility: hidden;
	}
}

.Flex {
	display: -webkit-flex;
	
	> * {
		-webkit-flex: 0 0 auto;
		
		@for $i from 1 through 5 {
			$selector: unquote('&[data-flex-grow="#{$i}"]');
			#{$selector} {
				-webkit-flex-grow: $i;
			}
			
			$selector: unquote('&[data-flex-shrink="#{$i}"]');
			#{$selector} {
				-webkit-flex-shrink: $i;
			}
		}
	}
	
	&Wrap {
		-webkit-flex-wrap: wrap;
	}
	
	&Inline {
		display: -webkit-inline-flex;
	}
	
	&Direction {
		&Row {
			-webkit-flex-direction: row;
			&Reverse {
				-webkit-flex-direction: row-reverse;
			}
		}
		
		&Column {
			-webkit-flex-direction: column;
			&Reverse {
				-webkit-flex-direction: column-reverse;
			}
		}
	}
	
	&Y {
		&Top {
			-webkit-align-items: flex-start;
		}
		
		&Center {
			-webkit-align-items: flex-center;
		}
		
		&Bottom {
			-webkit-align-items: flex-end;
		}
		
		&Stretch {
			-webkit-align-items: stretch;
		}
		
		&Baseline {
			-webkit-align-items: baseline;
		}
	}
	
	&Justify {
		&X {
			&Left {
				-webkit-justify-content: flex-start;
			}
		
			&Right {
				-webkit-justify-content: flex-end;
			}
		
			&Center {
				-webkit-justify-content: center;
			}
		
			&SpaceBetween {
				-webkit-justify-content: space-between;
			}
		
			&SpaceAround {
				-webkit-justify-content: space-around;
			}
		}
	
		&Y {
			&Top {
				-webkit-align-content: flex-start;
			}
		
			&Bottom {
				-webkit-align-content: flex-end;
			}
		
			&Center {
				-webkit-align-content: center;
			}
		
			&SpaceBetween {
				-webkit-align-content: space-between;
			}
		
			&SpaceAround {
				-webkit-align-content: space-around;
			}
		
			&Stretch {
				-webkit-align-content: space-around;
			}
		}
	}
}
let {expect} = require 'chai'
let {stub} = require 'sinon'

let ran = stub()
let fun()*
  ran()
  return "hello"

let iter = fun()
expect(iter.next()).to.eql { +done, value: "hello" }
for i in 0 til 10
  expect(iter.next()).to.eql { +done, value: void }
expect(ran).to.be.called-once